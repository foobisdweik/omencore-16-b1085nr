<UserControl x:Class="OmenCore.Controls.DiagnosticExportControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:OmenCore.Controls"
             mc:Ignorable="d"
             d:DesignHeight="500" d:DesignWidth="700"
             Background="{DynamicResource DarkBackgroundBrush}">

    <UserControl.Resources>
        <Style x:Key="DiagnosticButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="15,5"/>
        </Style>

        <Style x:Key="DiagnosticTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="Margin" Value="0,2"/>
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource CardBackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="8" Margin="0,0,0,10">
            <StackPanel Margin="15">
                <TextBlock Text="Diagnostic Export" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource TextBrush}" Margin="0,0,0,10"/>
                <TextBlock Text="Export system diagnostics and logs to help troubleshoot issues. This creates a comprehensive report that can be attached to GitHub issues or shared with support." FontSize="14" Foreground="{DynamicResource SecondaryTextBrush}" TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Border Grid.Row="1" Background="{DynamicResource CardBackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="8">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">

                    <!-- Export Options -->
                    <GroupBox Header="Export Options" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="IncludeSystemInfoCheck" Content="System Information (OS, hardware, drivers)" IsChecked="True" Margin="0,5"/>
                            <CheckBox x:Name="IncludeHardwareDataCheck" Content="Hardware Monitoring Data (temperatures, fan speeds, power)" IsChecked="True" Margin="0,5"/>
                            <CheckBox x:Name="IncludeLogsCheck" Content="Application Logs (last 1000 entries)" IsChecked="True" Margin="0,5"/>
                            <CheckBox x:Name="IncludeSettingsCheck" Content="Settings &amp; Configuration" IsChecked="True" Margin="0,5"/>
                            <CheckBox x:Name="IncludePerformanceDataCheck" Content="Performance Mode Data" IsChecked="True" Margin="0,5"/>
                            <CheckBox x:Name="IncludeFanCalibrationCheck" Content="Fan Calibration Data (if available)" IsChecked="True" Margin="0,5"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Export Format -->
                    <GroupBox Header="Export Format" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <RadioButton x:Name="JsonFormatRadio" Content="JSON Format (structured, machine-readable)" IsChecked="True" GroupName="Format" Margin="0,5"/>
                            <RadioButton x:Name="TextFormatRadio" Content="Text Format (human-readable)" GroupName="Format" Margin="0,5"/>
                            <RadioButton x:Name="CompressedFormatRadio" Content="Compressed ZIP (smaller file size)" GroupName="Format" Margin="0,5"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Privacy Options -->
                    <GroupBox Header="Privacy &amp; Security" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="AnonymizeDataCheck" Content="Anonymize sensitive data (remove usernames, paths, etc.)" IsChecked="False" Margin="0,5"/>
                            <TextBlock Text="Note: Diagnostic data includes system information but no personal files or credentials." Style="{StaticResource DiagnosticTextStyle}" TextWrapping="Wrap"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Progress -->
                    <GroupBox Header="Export Progress" Margin="0,0,0,15" x:Name="ProgressGroup" Visibility="Collapsed">
                        <StackPanel Margin="10">
                            <ProgressBar x:Name="ExportProgress" Height="20" Margin="0,0,0,10"/>
                            <TextBlock x:Name="ProgressText" Text="Preparing diagnostic data..." Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock x:Name="CurrentStepText" Text="" Style="{StaticResource DiagnosticTextStyle}" FontWeight="SemiBold"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Results -->
                    <GroupBox Header="Export Results" Margin="0,0,0,15" x:Name="ResultsGroup" Visibility="Collapsed">
                        <StackPanel Margin="10">
                            <TextBlock x:Name="ResultsText" Text="Export completed successfully" Style="{StaticResource DiagnosticTextStyle}" FontWeight="SemiBold"/>
                            <TextBlock x:Name="FilePathText" Text="File saved to: " Style="{StaticResource DiagnosticTextStyle}" TextWrapping="Wrap"/>
                            <TextBlock x:Name="FileSizeText" Text="File size: " Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock x:Name="ExportSummaryText" Text="Contains: system info, hardware data, logs, settings" Style="{StaticResource DiagnosticTextStyle}" TextWrapping="Wrap"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- GitHub Integration -->
                    <GroupBox Header="GitHub Issue Integration" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <TextBlock Text="Quick GitHub Issue Creation:" Style="{StaticResource SectionHeaderStyle}"/>
                            <TextBlock Text="1. Export diagnostics using the button below" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="2. Click 'Create GitHub Issue' to open a pre-filled issue" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="3. Attach the exported diagnostic file to the issue" Style="{StaticResource DiagnosticTextStyle}"/>
                            <Button x:Name="CreateGitHubIssueButton" Content="Create GitHub Issue" Style="{StaticResource DiagnosticButtonStyle}" Background="{DynamicResource AccentBrush}" Foreground="White" Click="CreateGitHubIssueButton_Click" Margin="0,10,0,0"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Information -->
                    <Border Background="{DynamicResource InfoBackgroundBrush}" BorderBrush="{DynamicResource InfoBrush}" BorderThickness="1" CornerRadius="4" Padding="10">
                        <StackPanel>
                            <TextBlock Text="ℹ️ What gets exported:" FontWeight="SemiBold" Foreground="{DynamicResource InfoBrush}" Margin="0,0,0,5"/>
                            <TextBlock Text="• System information (OS version, hardware specs, driver versions)" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="• Hardware monitoring data (temperatures, fan speeds, power consumption)" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="• Application logs and error messages" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="• Current settings and configuration" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="• Performance mode and fan calibration data" Style="{StaticResource DiagnosticTextStyle}"/>
                            <TextBlock Text="No personal files, credentials, or sensitive information is included." Style="{StaticResource DiagnosticTextStyle}" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Action Buttons -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="8" Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="15">
                <Button x:Name="ExportButton" Content="Export Diagnostics" Style="{StaticResource DiagnosticButtonStyle}" Background="{DynamicResource AccentBrush}" Foreground="White" Click="ExportButton_Click"/>
                <Button x:Name="CancelExportButton" Content="Cancel" Style="{StaticResource DiagnosticButtonStyle}" Background="{DynamicResource ErrorBrush}" Foreground="White" Click="CancelExportButton_Click" Visibility="Collapsed"/>
                <Button x:Name="OpenExportFolderButton" Content="Open Folder" Style="{StaticResource DiagnosticButtonStyle}" Click="OpenExportFolderButton_Click" Visibility="Collapsed"/>
                <Button x:Name="CopyPathButton" Content="Copy Path" Style="{StaticResource DiagnosticButtonStyle}" Click="CopyPathButton_Click" Visibility="Collapsed"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>